{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{getPosts,updatePost,deletePost}from\"../../api\";// Corrected import path\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditPost=()=>{const[posts,setPosts]=useState([]);const[editingPost,setEditingPost]=useState(null);const[title,setTitle]=useState(\"\");const[content,setContent]=useState(\"\");const[type,setType]=useState(\"video\");const[error,setError]=useState(\"\");useEffect(()=>{const fetchPosts=async()=>{try{const data=await getPosts();setPosts(data);}catch(err){console.error(err);}};fetchPosts();},[]);const handleEdit=post=>{setEditingPost(post);setTitle(post.title);setContent(post.content);setType(post.type);};const handleUpdate=async e=>{e.preventDefault();try{await updatePost({id:editingPost.id,title,content,type});alert(\"Post updated successfully!\");setEditingPost(null);setTitle(\"\");setContent(\"\");setType(\"video\");const data=await getPosts();setPosts(data);}catch(err){console.error(err);setError(\"Failed to update post\");}};const handleDelete=async id=>{try{await deletePost(id);alert(\"Post deleted successfully!\");const data=await getPosts();setPosts(data);}catch(err){console.error(err);setError(\"Failed to delete post\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Posts\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsx(\"ul\",{children:posts.map(post=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.content}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Type: \",post.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted by: \",post.created_by]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted at: \",post.created_at]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(post),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(post.id),children:\"Delete\"})]},post.id))}),editingPost&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Content\",value:content,onChange:e=>setContent(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>setType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"video\",children:\"Video\"}),/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"option\",{value:\"file\",children:\"File\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Post\"})]})]});};export default EditPost;","map":{"version":3,"names":["React","useState","useEffect","getPosts","updatePost","deletePost","jsx","_jsx","jsxs","_jsxs","EditPost","posts","setPosts","editingPost","setEditingPost","title","setTitle","content","setContent","type","setType","error","setError","fetchPosts","data","err","console","handleEdit","post","handleUpdate","e","preventDefault","id","alert","handleDelete","children","style","color","map","created_by","created_at","onClick","onSubmit","placeholder","value","onChange","target","required"],"sources":["C:/Users/Global PC/Desktop/univer/teaching-platform/frontend/src/components/forms/EditPost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getPosts, updatePost, deletePost } from \"../../api\"; // Corrected import path\r\n\r\nconst EditPost = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [editingPost, setEditingPost] = useState(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const [type, setType] = useState(\"video\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const data = await getPosts();\r\n        setPosts(data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const handleEdit = (post) => {\r\n    setEditingPost(post);\r\n    setTitle(post.title);\r\n    setContent(post.content);\r\n    setType(post.type);\r\n  };\r\n\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await updatePost({ id: editingPost.id, title, content, type });\r\n      alert(\"Post updated successfully!\");\r\n      setEditingPost(null);\r\n      setTitle(\"\");\r\n      setContent(\"\");\r\n      setType(\"video\");\r\n      const data = await getPosts();\r\n      setPosts(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Failed to update post\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deletePost(id);\r\n      alert(\"Post deleted successfully!\");\r\n      const data = await getPosts();\r\n      setPosts(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(\"Failed to delete post\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Edit Posts</h1>\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      <ul>\r\n        {posts.map((post) => (\r\n          <li key={post.id}>\r\n            <h2>{post.title}</h2>\r\n            <p>{post.content}</p>\r\n            <p>Type: {post.type}</p>\r\n            <p>Posted by: {post.created_by}</p>\r\n            <p>Posted at: {post.created_at}</p>\r\n            <button onClick={() => handleEdit(post)}>Edit</button>\r\n            <button onClick={() => handleDelete(post.id)}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {editingPost && (\r\n        <form onSubmit={handleUpdate}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n          />\r\n          <textarea\r\n            placeholder=\"Content\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            required\r\n          />\r\n          <select value={type} onChange={(e) => setType(e.target.value)}>\r\n            <option value=\"video\">Video</option>\r\n            <option value=\"image\">Image</option>\r\n            <option value=\"file\">File</option>\r\n          </select>\r\n          <button type=\"submit\">Update Post</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditPost;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,UAAU,CAAEC,UAAU,KAAQ,WAAW,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9D,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACkB,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,OAAO,CAAC,CACzC,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAArB,QAAQ,CAAC,CAAC,CAC7BS,QAAQ,CAACY,IAAI,CAAC,CAChB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACL,KAAK,CAACI,GAAG,CAAC,CACpB,CACF,CAAC,CACDF,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,UAAU,CAAIC,IAAI,EAAK,CAC3Bd,cAAc,CAACc,IAAI,CAAC,CACpBZ,QAAQ,CAACY,IAAI,CAACb,KAAK,CAAC,CACpBG,UAAU,CAACU,IAAI,CAACX,OAAO,CAAC,CACxBG,OAAO,CAACQ,IAAI,CAACT,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAA3B,UAAU,CAAC,CAAE4B,EAAE,CAAEnB,WAAW,CAACmB,EAAE,CAAEjB,KAAK,CAAEE,OAAO,CAAEE,IAAK,CAAC,CAAC,CAC9Dc,KAAK,CAAC,4BAA4B,CAAC,CACnCnB,cAAc,CAAC,IAAI,CAAC,CACpBE,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,EAAE,CAAC,CACdE,OAAO,CAAC,OAAO,CAAC,CAChB,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAArB,QAAQ,CAAC,CAAC,CAC7BS,QAAQ,CAACY,IAAI,CAAC,CAChB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACL,KAAK,CAACI,GAAG,CAAC,CAClBH,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CACF,CAAC,CAED,KAAM,CAAAY,YAAY,CAAG,KAAO,CAAAF,EAAE,EAAK,CACjC,GAAI,CACF,KAAM,CAAA3B,UAAU,CAAC2B,EAAE,CAAC,CACpBC,KAAK,CAAC,4BAA4B,CAAC,CACnC,KAAM,CAAAT,IAAI,CAAG,KAAM,CAAArB,QAAQ,CAAC,CAAC,CAC7BS,QAAQ,CAACY,IAAI,CAAC,CAChB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACL,KAAK,CAACI,GAAG,CAAC,CAClBH,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CACF,CAAC,CAED,mBACEb,KAAA,QAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAI,YAAU,CAAI,CAAC,CAClBd,KAAK,eAAId,IAAA,MAAG6B,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAF,QAAA,CAAEd,KAAK,CAAI,CAAC,cACjDd,IAAA,OAAA4B,QAAA,CACGxB,KAAK,CAAC2B,GAAG,CAAEV,IAAI,eACdnB,KAAA,OAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAKP,IAAI,CAACb,KAAK,CAAK,CAAC,cACrBR,IAAA,MAAA4B,QAAA,CAAIP,IAAI,CAACX,OAAO,CAAI,CAAC,cACrBR,KAAA,MAAA0B,QAAA,EAAG,QAAM,CAACP,IAAI,CAACT,IAAI,EAAI,CAAC,cACxBV,KAAA,MAAA0B,QAAA,EAAG,aAAW,CAACP,IAAI,CAACW,UAAU,EAAI,CAAC,cACnC9B,KAAA,MAAA0B,QAAA,EAAG,aAAW,CAACP,IAAI,CAACY,UAAU,EAAI,CAAC,cACnCjC,IAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAMd,UAAU,CAACC,IAAI,CAAE,CAAAO,QAAA,CAAC,MAAI,CAAQ,CAAC,cACtD5B,IAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAMP,YAAY,CAACN,IAAI,CAACI,EAAE,CAAE,CAAAG,QAAA,CAAC,QAAM,CAAQ,CAAC,GAPtDP,IAAI,CAACI,EAQV,CACL,CAAC,CACA,CAAC,CACJnB,WAAW,eACVJ,KAAA,SAAMiC,QAAQ,CAAEb,YAAa,CAAAM,QAAA,eAC3B5B,IAAA,UACEY,IAAI,CAAC,MAAM,CACXwB,WAAW,CAAC,OAAO,CACnBC,KAAK,CAAE7B,KAAM,CACb8B,QAAQ,CAAGf,CAAC,EAAKd,QAAQ,CAACc,CAAC,CAACgB,MAAM,CAACF,KAAK,CAAE,CAC1CG,QAAQ,MACT,CAAC,cACFxC,IAAA,aACEoC,WAAW,CAAC,SAAS,CACrBC,KAAK,CAAE3B,OAAQ,CACf4B,QAAQ,CAAGf,CAAC,EAAKZ,UAAU,CAACY,CAAC,CAACgB,MAAM,CAACF,KAAK,CAAE,CAC5CG,QAAQ,MACT,CAAC,cACFtC,KAAA,WAAQmC,KAAK,CAAEzB,IAAK,CAAC0B,QAAQ,CAAGf,CAAC,EAAKV,OAAO,CAACU,CAAC,CAACgB,MAAM,CAACF,KAAK,CAAE,CAAAT,QAAA,eAC5D5B,IAAA,WAAQqC,KAAK,CAAC,OAAO,CAAAT,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpC5B,IAAA,WAAQqC,KAAK,CAAC,OAAO,CAAAT,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpC5B,IAAA,WAAQqC,KAAK,CAAC,MAAM,CAAAT,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC5B,CAAC,cACT5B,IAAA,WAAQY,IAAI,CAAC,QAAQ,CAAAgB,QAAA,CAAC,aAAW,CAAQ,CAAC,EACtC,CACP,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}